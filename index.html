<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Mapa Regionów NMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body { margin:0; font-family:sans-serif; background:#111; color:white; display:flex; flex-direction:column; align-items:center; }
  #hud { margin:10px; }
  #grid {
    display:grid;
    grid-template-columns: repeat(4, 60px);
    grid-template-rows: repeat(4, 60px);
    gap:4px;
  }
  .regionTile {
    background:#222;
    border:1px solid #555;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    user-select:none;
    transition:0.2s;
  }
  .regionTile:hover { background:#444; }
  .selected { background:#0f0; }
  button { margin:0 5px; padding:5px 10px; cursor:pointer; }
</style>
</head>
<body>

<div id="hud">
  <button id="zoomIn">+</button>
  <button id="zoomOut">-</button>
  <span id="levelLabel">Poziom: Galaktyka</span>
</div>

<div id="grid"></div>

<script>
// === Dane galaktyki ===
const TOTAL_REGIONS = 256; // 256x256 regionów
const GROUP_SIZE = 4;       // 4x4 regiony w grupie
const LEVEL_LABELS = ["Galaktyka", "Grupa 4x4", "Region 1x1"];

// === Stan ===
let currentLevel = 0; // 0=galaktyka, 1=grupa, 2=region
let currentX = 0;     // start X grupy/regionu
let currentZ = 0;     // start Z grupy/regionu
let selectedTile = null;

// === Elementy DOM ===
const gridEl = document.getElementById("grid");
const zoomInBtn = document.getElementById("zoomIn");
const zoomOutBtn = document.getElementById("zoomOut");
const levelLabel = document.getElementById("levelLabel");

// === Funkcja rysująca siatkę 4x4 ===
function drawGrid() {
  gridEl.innerHTML = "";
  for (let i = 0; i < 4; i++) {
    for (let j = 0; j < 4; j++) {
      const tile = document.createElement("div");
      tile.classList.add("regionTile");

      // Obliczamy globalne współrzędne regionu
      let regionX = currentX + i * (currentLevel < 2 ? GROUP_SIZE : 1);
      let regionZ = currentZ + j * (currentLevel < 2 ? GROUP_SIZE : 1);
      tile.dataset.x = regionX;
      tile.dataset.z = regionZ;

      tile.textContent = `(${regionX},${regionZ})`;

      tile.addEventListener("click", () => {
        if (selectedTile) selectedTile.classList.remove("selected");
        selectedTile = tile;
        tile.classList.add("selected");
      });

      gridEl.appendChild(tile);
    }
  }
  levelLabel.textContent = `Poziom: ${LEVEL_LABELS[currentLevel]}`;
}

// === Przyciski zoom ===
zoomInBtn.addEventListener("click", () => {
  if (!selectedTile || currentLevel >= 2) return;
  currentLevel++;
  currentX = parseInt(selectedTile.dataset.x);
  currentZ = parseInt(selectedTile.dataset.z);
  selectedTile = null;
  drawGrid();
});

zoomOutBtn.addEventListener("click", () => {
  if (currentLevel <= 0) return;
  currentLevel--;
  // cofamy do nadrzędnego regionu
  currentX = Math.floor(currentX / GROUP_SIZE) * GROUP_SIZE;
  currentZ = Math.floor(currentZ / GROUP_SIZE) * GROUP_SIZE;
  selectedTile = null;
  drawGrid();
});

// === Inicjalizacja ===
drawGrid();
</script>

</body>
</html>
